<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Ratul LIV - Live Sports</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />

  <!-- Main CSS -->
  <link rel="stylesheet" href="style.css" />

  <!-- JW Player -->
  <script src="https://ssl.p.jwpcdn.com/player/v/8.33.2/jwplayer.js"></script>
  <script>jwplayer.key = "cLGMn8T20tGvW+0eXPhq4NNmLB57TrscPjd1IyJF84o=";</script>

  <!-- Firebase SDK + Sorting -->
  <script type="module">
    async function initializeFirebase() {
      try {
        const { initializeApp } = await import('https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js');
        const { getDatabase, ref, onValue } = await import('https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js');

        const firebaseConfig = {
          apiKey: "AIzaSyCkLQ5vf1z9dYjAVcOo7tm0BRT8N7jAbOw",
          authDomain: "ratul-liv.firebaseapp.com",
          databaseURL: "https://ratul-liv-default-rtdb.asia-southeast1.firebasedatabase.app",
          projectId: "ratul-liv",
          storageBucket: "ratul-liv.appspot.com",
          messagingSenderId: "395032456768",
          appId: "1:395032456768:web:eadef753d410c71c5439a5",
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        const matchesRef = ref(db, 'matches');

        function sortMatches(arr) {
          return arr
            .map(m => {
              const now = Date.now();
              m._status = m.status?.toLowerCase() || 'scheduled';
              m._start = new Date(m.startTime).getTime() || 0;
              m._end = new Date(m.endTime).getTime() || m._start;
              m._order = m._status === 'live' ? 0 : (m._start > now ? 1 : 2);
              return m;
            })
            .sort((a, b) => {
              if (a._order !== b._order) return a._order - b._order;
              return a._order === 2 ? b._end - a._end : a._start - b._start;
            });
        }

        onValue(matchesRef, snapshot => {
          const data = snapshot.val() || {};
          window.matches = {
            football: data.football ? sortMatches(Object.values(data.football)) : [],
            cricket: data.cricket ? sortMatches(Object.values(data.cricket)) : []
          };
          document.dispatchEvent(new CustomEvent('firebaseDataReady'));
        });
      } catch (err) {
        console.error("Firebase error:", err);
        window.matches = { football: [], cricket: [] };
        document.dispatchEvent(new CustomEvent('firebaseDataError'));
      }
    }

    initializeFirebase();
  </script>
</head>
<body>
  <div class="container">

    <!-- Header -->
    <header class="header">
      <div class="logo">Live Sports ЁЯЗзЁЯЗй</div>
      <button class="menu-btn" id="menuBtn"><i class="fas fa-bars"></i></button>
      <div class="dropdown-menu" id="dropdownMenu">
        <a href="https://t.me/+5S-lx5CxGJEwMTdl" target="_blank"><i class="fab fa-telegram-plane"></i> Join Telegram</a>
        <a href="#about">About</a>
        <a href="#contact">Contact</a>
      </div>
    </header>
   <!-- ads <script async src="https://js.wpadmngr.com/static/adManager.js" data-admpid="346903"></script>
<!-- Marquee Notice -->
<!--<div class="notice-marquee">
  <div class="notice-text">
    ЁЯОе ржнрж┐ржбрж┐ржУ рж▓рзЛржб рж╣рждрзЗ ржХрж┐ржЫрзБржЯрж╛ рж╕ржоржпрж╝ рж▓рж╛ржЧрждрзЗ ржкрж╛рж░рзЗ тАФ рж╕рж░рзНржмрзЛржЪрзНржЪ ржПржХ ржорж┐ржирж┐ржЯ ржЕржкрзЗржХрзНрж╖рж╛ ржХрж░рзБржиред тЪая╕П ржЦрзЗрж▓рж╛ рж╢рзБрж░рзБ рж╣ржУржпрж╝рж╛рж░ ржЖржЧрзЗ ржХрж┐ржЫрзБ ржЪрзНржпрж╛ржирзЗрж▓ ржХрж╛ржЬ ржирж╛ржУ ржХрж░рждрзЗ ржкрж╛рж░рзЗ тАФ ржЦрзЗрж▓рж╛ рж╢рзБрж░рзБ рж╣ржУржпрж╝рж╛ ржкрж░рзНржпржирзНржд ржЕржкрзЗржХрзНрж╖рж╛ ржХрж░рзБржи, ржЪрзНржпрж╛ржирзЗрж▓ ржарж┐ржХ рж╣ржпрж╝рзЗ ржпрж╛ржмрзЗред тЬЕ ржпрзЗржЧрзБрж▓рзЛ ржорзНржпрж╛ржЪ рж╢рзЗрж╖ рж╣ржпрж╝рзЗ ржЧрзЗржЫрзЗ рж╕рзЗржЧрзБрж▓рзЛ ржЪрзНржпрж╛ржирзЗрж▓ ржХрж╛ржЬ ржирж╛ржУ ржХрж░рждрзЗ ржкрж╛рж░рзЗ тАФ ржзржирзНржпржмрж╛ржжред
  </div>
</div>
    <!-- Featured Match -->
    <section class="featured-match" id="videoSection" style="display:none;">
      <div class="featured-title" id="videoTitle"></div>
      <div class="player-container">
        <div id="jwplayerDiv" class="video-player"></div>
      </div>
      <div class="server-options" id="serverRow"></div>
    </section>

    <!-- Tabs -->
    <nav class="nav-tabs">
      <button class="tab-btn active" id="tabFootball">Football</button>
      <button class="tab-btn" id="tabCricket">Cricket</button>
    </nav>

    <!-- Match Sections -->
    <section id="football-section" class="matches-section"></section>
    <section id="cricket-section" class="matches-section hidden"></section>

    <!-- Footer -->
    <footer class="footer">&copy; 2025 Ratul LIV. All Rights Reserved. ЁЯЗзЁЯЗй</footer>
  </div>

  <!-- Firebase Status -->
  <div id="firebaseStatus" class="firebase-status">Initializing...</div>

  <!-- App Logic -->
  <script src="app.js"></script>
</body>
</html>
